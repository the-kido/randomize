<style>
    
    :root {
        --border-color: rgb(43.157834017734544, 167.52217416568587, 102.91849103977503);
        --background-color: hsl(148, 100%, 50%);
    }

    #demotext {
color: #FFFFFF;
background: #232323;
text-shadow: 0 0 5px #FFF, 0 0 10px #FFF, 0 0 15px #FFF, 0 0 20px #49ff18, 0 0 30px #49FF18, 0 0 40px #49FF18, 0 0 55px #49FF18, 0 0 75px #49ff18;
color: #FFFFFF;
background: #232323;
}
    #text {
        font-size: 5em;
        color: var(--border-color);
    }

    body {
        font-family: sans-serif;
        background: var(--background-color);
    }
    
    button {
        padding: 5% 15%;
        font-size: 3em;
        border-radius: 8px;
        background: var(--background-color);
        
        border: 0.05em solid var(--border-color);
        color: var(--border-color);
        transition-duration: 0.4s;
    }

    button:hover {
        background-color: var(--border-color); /* Green */
        color: white;
    }
    
    .center {
        margin: auto;
        width: 70%;
        /* height: 30%; */
        padding: 4em;
        text-align: center;
        border: 0.25em solid var(--border-color);
        border-radius: 8px;
    }


</style>

<body>
    <div class="center">
        <button onclick="onButtonPressed()">
            Randomize direction!
        </button>
        
        <h1 id = "text"> randomize </h1>

        <script>
            
            (color) =>`.center { border: 3px solid ` + color + `; }`

            var text = document.getElementById("text")
            var root = document.querySelector(':root');
            
            

            function onButtonPressed() {
                var r = Math.random()*200,
                    g = Math.random()*200,
                    b = Math.random()*200;

                var newBorderColor = "rgb(" + [r, g, b].join(", "); + ")"
                root.style.setProperty("--border-color", newBorderColor);
                
                var hsv = rgb2hsv(r, g, b)
                hsv.h = Math.round(hsv.h, 2) - 25;
                hsv.s = Math.round(hsv.s, 2) / 5+ "%";

                hsv.v = Math.max(100 - hsv.v, hsv.v) * 1.5;
                hsv.v = hsv.v > 100 ? "90%" : hsv.v + "%";

                var newBackgroundColor = "hsl(" + hsv.h + ", " + hsv.s + ", " + hsv.v + ")"
                console.log(newBackgroundColor) 
                root.style.setProperty("--background-color", newBackgroundColor);
                


                var rand = Math.random()
                text.innerHTML = rand <= 0.5 ? "←" : "→"
            }
            
            var div = document.getElementsByClassName("center")[0]

            const myObserver = new ResizeObserver(() => {
                var height = parseInt( (document.body.scrollHeight - div.offsetHeight) / 2 );
                div.style.marginTop = height.toString() + "px";
            }).observe(document.body);


            // stolen: https://stackoverflow.com/a/54070620
            function rgb2hsv (r, g, b) {
                let rabs, gabs, babs, rr, gg, bb, h, s, v, diff, diffc, percentRoundFn;
                rabs = r / 255;
                gabs = g / 255;
                babs = b / 255;
                v = Math.max(rabs, gabs, babs),
                diff = v - Math.min(rabs, gabs, babs);
                diffc = c => (v - c) / 6 / diff + 1 / 2;
                percentRoundFn = num => Math.round(num * 100) / 100;
                if (diff == 0) {
                    h = s = 0;
                } else {
                    s = diff / v;
                    rr = diffc(rabs);
                    gg = diffc(gabs);
                    bb = diffc(babs);

                    if (rabs === v) {
                        h = bb - gg;
                    } else if (gabs === v) {
                        h = (1 / 3) + rr - bb;
                    } else if (babs === v) {
                        h = (2 / 3) + gg - rr;
                    }
                    if (h < 0) {
                        h += 1;
                    }else if (h > 1) {
                        h -= 1;
                    }
                }
                return {
                    h: Math.round(h * 360),
                    s: percentRoundFn(s * 100),
                    v: percentRoundFn(v * 100)
                };

                
            }

        </script>

    </div>
</body>